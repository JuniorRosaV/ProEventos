<div class="eventos-container">
<div class="card rounded shadow-sm p-3">
    <div class="d-flex justify-content-between mb-3 flex-wrap">
        <div class="form-group mb-2 w-100 w-md-auto">
            <input type="text" class="form-control mr-2 rounded w-100" placeholder="Buscar" [(ngModel)]="filtroLista">
        </div>
        <div>
            <a class="d-flex btn btn-outline-primary" routerLink="/eventos/detalhe">
                <i class="fa fa-plus-circle my-1"></i>
                <b class="ml-1 d-none d-sm-block">Novo</b>
            </a>
        </div>
    </div>

    <div *ngIf="loading" class="text-center mt-3">
        <p>Carregando eventos...</p>
    </div>

    <div class="table-responsive">
        <table *ngIf="!loading && eventosFiltrados.length > 0" class="table table-striped">
            <thead class="thead-dark">
                <tr>
                    <th>
                        <button type="button" class="btn btn-outline-light btn-sm" (click)="alterarImagem()">
                            <i class="{{ !mostrarImagem ? 'fa fa-eye' : 'fa fa-eye-slash' }}"></i>
                            {{ !mostrarImagem ? 'Exibir' : 'Ocultar' }}
                        </button>
                    </th>
                    <th>#</th>
                    <th>Tema</th>
                    <th>Local</th>
                    <th>Data</th>
                    <th>Horário</th>
                    <th>Qtd Pessoas</th>
                    <th>Lote</th>
                    <th>Opções</th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="let evento of eventosFiltrados">
                    <td data-label="Imagem">
                        <img *ngIf="mostrarImagem" [src]="'/assets/' + evento.imagemUrl"
                            [style.width.px]="larguraImagem" [style.margin.px]="margemImagem">
                    </td>
                    <td data-label="ID">{{ evento.id }}</td>
                    <td data-label="Tema">{{ evento.tema }}</td>
                    <td data-label="Local">{{ evento.local }}</td>
                    <td data-label="Data">{{ evento.dataEvento | DateTimeFormatPipe }}</td>
                    <td data-label="Horário">{{ evento.dataEvento | HoursFormatPipe }}</td>
                    <td data-label="Qtd Pessoas">{{ evento.qtdPessoas }}</td>
                    <td data-label="Lote">{{ evento.lotes[0].nome }}</td>
                    <td data-label="Opções">
                        <button class="btn btn-outline-primary btn-sm" tooltip="Editar">
                            <i class="fa fa-edit"></i>
                        </button>
                        <button class="btn btn-outline-danger btn-sm" tooltip="Excluir" (click)="openModal(template)">
                            <i class="fa fa-trash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <ng-template #semEventos>
        <h1 class="text-center mt-3" *ngIf="!loading">Nenhum evento encontrado!</h1>
    </ng-template>
</div>

<ng-template #template>
    <div class="modal-body text-center">
        <p>Você deseja Excluir o evento?</p>
        <button type="button" class="btn btn-default" (click)="confirm()">Sim</button>
        <button type="button" class="btn btn-primary" (click)="decline()">Não</button>
    </div>
</ng-template>
</div>